<% if congress.present? %>
  <div class="container mb-4" id="page-container">
    <div class="card-group row mt-4">
      <% congress.each do |congress| %>
        <div class="card col-4 jinbae" data-toggle="modal" data-target="#exampleModalScrollable<%= congress.id %>" data-user="<%= congress.id %>">
          <img class="card-img-top pt-3" src="<%= congress.image_url %>" alt="Card image cap">
          <div class="mt-3">
            <h5 class="card-title"><%= congress.name %></h5>
          </div>
          <% if congress.party == "미래통합당" %>
            <div class="py-1 mb-3" style="background-color: #ff1493">
              <small class="text-white"><%= congress.party %></small>
            </div>
          <% elsif congress.party == "더불어민주당" %>
            <div class="py-1 mb-3" style="background-color: #0057B7">
              <small class="text-white"><%= congress.party %></small>
            </div>
          <% elsif congress.party == "정의당" %>
            <div class="py-1 mb-3" style="background-color: #FFD700">
              <small class="text-white"><%= congress.party %></small>
            </div>
          <% elsif congress.party == "민생당" %>
            <div class="py-1 mb-3" style="background-color: #FFD700">
              <small class="text-white"><%= congress.party %></small>
            </div>
          <% else %>
            <div class="py-1 mb-3" style="background-color: #808080">
              <small class="text-white"><%= congress.party %></small>
            </div>
          <% end %>
        </div>
        <div class="modal fade" id="exampleModalScrollable<%= congress.id %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable" role="document">
            <div class="modal-content text-white" id="modal-pop">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalScrollableTitle"><%= congress.name %> | <%= params[:keyword] %></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body text-left">
                <p class="mb-0" style="text-left">후보자 공약</p>
                <hr class="style-one">
                <a href="<%= congress.policy %>" class="text-success"><%= congress.name %>후보자 공약집 바로가기</a>
                <p class="mt-4 mb-0">도팩첵(도덕성 팩트 체크)</p>
                <hr class="style-one">
                <% if congress.link1.present? %>
                  <a href="<%= congress.link1 %>" class="fact_check"><%= congress.link1 %></a>
                  <hr class="style-one">
                  <a href="<%= congress.link2 %>" class="fact_check"><%= congress.link2 %></a>
                  <% if congress.link2.present? %>
                    <hr class="style-one">
                  <% end %>
                  <a href="<%= congress.link3 %>" class="fact_check"><%= congress.link3 %></a>
                  <% if congress.link3.present? %>
                    <hr class="style-one">
                  <% end %>
                  <a href="<%= congress.link4 %>" class="fact_check"><%= congress.link4 %></a>
                  <% if congress.link4.present? %>
                    <hr class="style-one">
                  <% end %>
                <% else %>
                  <p>의혹을 추가하시려면 제보해주세요:)</p>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>

<script>
  $('.jinbae').on("click", function () {
    var user_id = $(this).data('user');
    $.ajax({
      url : "/",
      type : "get",
      contentType: "application/javascript",
      dataType: "script",
      data : { user_id: user_id }
    });
  });
  $('#modal-pop').on('click', 'a', function(event) {
    event.preventDefault();
    window.open($(this).attr('href'), '_blank');
  });
</script>
